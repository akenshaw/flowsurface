---
// Header component encapsulates site navigation + theme toggle
---

<header
  class="fixed top-0 left-0 right-0 z-50 select-none bg-bg-1 sm:bg-transparent border-b border-border sm:border-none"
>
  <div
    class="w-full flex items-center justify-between gap-2 md:gap-4 p-2 md:px-6 md:py-5"
  >
    <a
      href="#top"
      aria-label="Flowsurface home"
      class="flex items-center gap-3 font-semibold tracking-wide md:tracking-[0.4em] text-base md:text-lg uppercase opacity-80 hover:opacity-100 transition-opacity"
    >
      <span
        class="w-2 h-2 bg-accent-primary rounded-full shadow-[0_0_0_4px_rgba(67,166,129,.25)]"
      ></span>
      Flowsurface
    </a>
    <div class="flex items-center gap-2 md:gap-3">
      <a
        href="#download"
        aria-label="Download Flowsurface"
        class="btn btn-primary px-3 py-[0.55rem] text-[0.65rem] leading-none tracking-wider"
        >Download</a
      >
      <a
        href="https://github.com/akenshaw/flowsurface"
        target="_blank"
        rel="noopener"
        aria-label="View Flowsurface on GitHub"
        class="btn btn-secondary px-3 py-[0.55rem] text-[0.65rem] leading-none tracking-wider"
        >GitHub</a
      >
      <button
        id="theme-toggle"
        aria-label="Toggle light/dark theme"
        class="inline-flex items-center justify-center rounded-md border border-border bg-surface-2 hover:border-border-soft hover:bg-surface-1 transition-colors px-3 py-[0.55rem] text-[0.65rem] leading-none tracking-wider font-semibold"
      >
        <span id="theme-toggle-icon" aria-hidden="true">☾</span>
      </button>
    </div>
  </div>
  <script>
    (function () {
      const btn = document.getElementById("theme-toggle");
      const icon = document.getElementById("theme-toggle-icon");
      if (!btn) return;
      function currentTheme() {
        return document.documentElement.classList.contains("light")
          ? "light"
          : "dark";
      }
      function apply(t) {
        if (t === "light") document.documentElement.classList.add("light");
        else document.documentElement.classList.remove("light");
        localStorage.setItem("fs-theme", t);
        if (icon) icon.textContent = t === "light" ? "☀︎" : "☾";
        const meta = document.querySelector('meta[name="theme-color"]');
        if (meta)
          meta.setAttribute("content", t === "light" ? "#f5f7f8" : "#0e0d0d");
      }
      apply(currentTheme());
      btn.addEventListener("click", () => {
        const next = currentTheme() === "light" ? "dark" : "light";
        apply(next);
      });
    })();
  </script>
</header>
